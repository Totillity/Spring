
c-module builtins = (Sprocket/std/builtins.c) {
    DECLARE:
        class Object = class {
            'to_string' : (SELF) -> String from builtins
        }

        class 'Integer' = class (Object from 'builtins') {

        }

        class 'String' = class (Object from 'builtins') {
            'len' : 'int'
        }

    DEFINE:
    NAMES:
}

module 'test' = (Spring_v2/Sprocket/test.spng) {
    DECLARE:
        class 'Person' = class ('Object' from 'builtins') {
            'name' : 'String' from 'builtins'
            'age' : 'int'

            'init' : ('any', 'String' from 'builtins', 'int') -> 'void'
        }

        def 'main' () -> int



    DEFINE:
        def 'main' () -> int {
            var 'jane': 'Person' from 'builtins'

            var '0': 'Person' from 'builtins'
            set '0' = call 'Person::create' ()
            var '1': ('any', 'String' from 'builtins', 'int') -> 'void'
            set '1' = get 'init' from '0'
            do call '1' ("Jane", 20)

            set 'jane' = '0'
        }

        def 'Person::create' () -> 'Person' from 'test' {
            var '0': 'Person' from 'builtins'
            set '0' = create 'Person' in SELF where {'name' = '',
                                                     'age' = 0,
                                                     'init' = 'Person::<instance>::init'}
        }

    NAMES:
        namespace 'Person' = {
            DECLARE:
                def '<instance>.init' () -> 'Person' from 'test'
        }
}
